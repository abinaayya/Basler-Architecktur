<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Karte – BAULINIE Basel</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="nav">
  <div class="nav-inner">
    <div class="logo">BAULINIE Basel</div>

    <nav class="nav-links">
      <a href="index.html" class="nav-link">Home</a>
      <a href="zeitstrahl.html" class="nav-link">Zeitstrahl</a>
      <a href="karte.html" class="nav-link nav-link--active">Karte</a>
      <a href="wir.html" class="nav-link">Projekt</a>

      <div class="dropdown">
        <button class="dropbtn" type="button">Bauwerke ▾</button>
        <div class="dropdown-content">
          <a href="elisabethen.html">1864 · Elisabethenkirche</a>
          <a href="markthalle.html">1929 · Markthalle</a>
          <a href="messe.html">2013 · Messe</a>
          <a href="kunstmuseum.html">2016 · Kunstmuseum</a>
          <a href="weinlager.html">2023 · Weinlager</a>
          <a href="novartis.html">2022 · Novartis Campus</a>
        </div>
      </div>
      <a href="Quellen.html" class="nav-link">Verzeichnis</a>
    </nav>
  </div>
</header>

<main class="map-page">
  <section class="map-hero">
    <div class="map-hero-inner">
      <h1>Karte</h1>
    </div>
  </section>

  <section class="map-shell">
    <div class="map-toolbar">
      <button class="toolbtn" type="button" id="zoomIn">＋</button>
      <button class="toolbtn" type="button" id="zoomOut">－</button>
      <button class="toolbtn" type="button" id="reset">Reset</button>

      <!-- optional: PDF Download -->
      <!-- <a class="toolbtn toolbtn-link" href="karte.pdf" download>PDF</a> -->
    </div>

    <div class="map-frame" id="mapFrame" aria-label="Kartenviewer">
      <img id="mapImage" src="Karte_Basel.jpg" alt="Karte Basel – Tramlinien und Bauwerke" draggable="false">
    </div>

    <p class="map-hint">
     Doppelklick (Desktop) oder Doppeltippen (Handy) zoomt.
    </p>
  </section>
</main>

<!-- kleine Zoom/Pan Library (sehr leichtgewichtig) -->
<script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
<script>
  const frame = document.getElementById("mapFrame");
  const img = document.getElementById("mapImage");

  const panzoom = Panzoom(img, {
    maxScale: 8,
    minScale: 1,          // Start ist "fit", also 1
    contain: "outside",
    cursor: "grab",
    animate: true
  });

  frame.addEventListener("pointerdown", (e) => {
    if (e.pointerType === "touch") e.preventDefault();
  });

  frame.addEventListener("wheel", panzoom.zoomWithWheel, { passive: false });

  document.getElementById("zoomIn").addEventListener("click", () => panzoom.zoomIn());
  document.getElementById("zoomOut").addEventListener("click", () => panzoom.zoomOut());
  document.getElementById("reset").addEventListener("click", () => panzoom.reset());

  // Doppelklick / Doppeltipp
  let lastTap = 0;
  frame.addEventListener("dblclick", (e) => {
    e.preventDefault();
    panzoom.zoomIn({ animate: true });
  });

  frame.addEventListener("touchend", () => {
    const now = Date.now();
    if (now - lastTap < 300) panzoom.zoomIn({ animate: true });
    lastTap = now;
  }, { passive: true });
</script>

</body>
</html>